"use strict";!function(t){const i=t("body.beehive");if(i.hasClass("activity")||i.hasClass("group-home")){const i=t("#bp-nouveau-activity-form"),n=t("#rtmedia-add-media-button-post-update"),r=t("#activity-stream")[0],d={childList:!0,subtree:!0};i.on("click",function(){const i=t(this).find("#whats-new"),e=beehive_data.activity_max;i.attr("maxlength",e),i.on("keyup",function(){t("#bp-nouveau-activity-form .char-count").length||t(this).after('<span class="char-count mute"></span>');const i=t("#bp-nouveau-activity-form .char-count"),a=t(this).val().length,s=e-a;i.text(s)})}),n.length&&n.append('<span class="button-text">'+beehive_data.attachment_text+"</span>");let c=new MutationObserver((t,i)=>{for(let i of t)if("childList"==i.type&&i.addedNodes.length)for(let t of i.addedNodes)if(1==t.nodeType){if(t.classList.contains("activity-list"))for(let i of t.children)i.classList.contains("activity-item")&&(s(),e(),a());t.classList.contains("activity-item")&&(s(),e(),a())}});if(r){t(".activity-item",r).length&&(e(),a()),c.observe(r,d)}function e(){t("li.activity_update, li.rtmedia_update").each(function(){if(t(this).hasClass("text-rendered"))return;const i=t(this).find(".activity-inner"),e=i.find(".rtmedia-activity-container"),a=e.find(".rtmedia-activity-text");e.length||a.length?a.addClass("activity-inner-text"):i.wrapInner('<div class="activity-inner-text"></div>');const s=t(this).find(".activity-inner-text"),n=s.find(".jetpack-video-wrapper");s.find(".jetpack-video-wrapper").remove(),s.length&&s.shorten({showChars:230,moreText:beehive_data.read_more.toLowerCase(),lessText:beehive_data.read_close}),n.appendTo(s),t(this).addClass("text-rendered")})}function a(){t(".activity-item .rtm-activity-media-list").each(function(){if(!t(this).hasClass("rtm-activity-list-rendered"))if(t(this).hasClass("rtm-activity-photo-list")){const i=4;if(t(this).children().length>i){t(this).find(".rtmedia-list-item").filter(function(t){return t+1==i}).addClass("more").end().filter(function(t){return t+1>i}).hide(),t(this).addClass("rtm-activity-list-rendered")}}else if(t(this).hasClass("rtm-activity-video-list")||t(this).hasClass("rtm-activity-music-list")||t(this).hasClass("rtm-activity-mixed-list"))if(t(this).children().length>1){t(this).find(".rtmedia-list-item video").each(function(){t(this).attr("preload",!0)}),t(this).wrap('<div class="rtm-activity-slider-container"></div>'),t(this).addClass("swiper-wrapper"),t(this).find(".rtmedia-list-item").addClass("swiper-slide"),t(this).after('<div class="swiper-pagination"></div>'),new Swiper(".rtm-activity-slider-container",{pagination:{el:".swiper-pagination",clickable:!0}}),t(this).addClass("rtm-activity-list-rendered")}else{t(this).find(".rtmedia-list-item video").each(function(){t(this).attr("preload",!0)}),t(this).addClass("rtm-activity-list-rendered")}})}function s(){t("li.activity_update, li.rtmedia_update").each(function(){if(t(this).hasClass("url-preview-rendered"))return;const i=t(this).find(".rtmp_final_link");i.length&&(i.find("iframe").length&&i.addClass("has-iframe"),i.insertAfter(t(this).find(".activity-header")),t(this).addClass("url-preview-rendered"))})}}if(i.hasClass("beehive-media")){t(".rtmedia-uploader-div").length||t(window).scroll(function(){const i=t(".rtmedia_gallery_wrapper").find(".rtm-load-more a.show-it");if(i.length&&"block"==i.css("display")){const e=i.offset().top-50;t(window).scrollTop()+t(window).height()>e&&i.trigger("click")}})}}(jQuery);
